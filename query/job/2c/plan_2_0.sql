create or replace TEMP view aggView1547506450473786536 as select id as v18 from keyword as k where (keyword = 'character-name-in-title');
create or replace TEMP view aggJoin2482698468592999466 as select movie_id as v12 from movie_keyword as mk, aggView1547506450473786536 where mk.keyword_id=aggView1547506450473786536.v18;
create or replace TEMP view aggView4570965574157914958 as select id as v12, title as v31 from title as t;
create or replace TEMP view aggJoin3301562658773225693 as select movie_id as v12, company_id as v1, v31 from movie_companies as mc, aggView4570965574157914958 where mc.movie_id=aggView4570965574157914958.v12;
create or replace TEMP view aggView1890848228668298824 as select v12, COUNT(*) as annot from aggJoin2482698468592999466 group by v12;
create or replace TEMP view aggJoin1547440271731940873 as select v1, v31 as v31, annot from aggJoin3301562658773225693 join aggView1890848228668298824 using(v12);
create or replace TEMP view aggView6644023134784837018 as select id as v1 from company_name as cn where (country_code = '[sm]');
create or replace TEMP view aggJoin6610105489295539599 as select v31, annot from aggJoin1547440271731940873 join aggView6644023134784837018 using(v1);
create or replace TEMP view res as select MIN(v31) as v31 from aggJoin6610105489295539599;
select sum(v31) from res;