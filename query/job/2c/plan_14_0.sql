create or replace TEMP view aggView1488363787372288259 as select id as v18 from keyword as k where (keyword = 'character-name-in-title');
create or replace TEMP view aggJoin2820336204201584296 as select movie_id as v12 from movie_keyword as mk, aggView1488363787372288259 where mk.keyword_id=aggView1488363787372288259.v18;
create or replace TEMP view aggView3254008424787148342 as select id as v1 from company_name as cn where (country_code = '[sm]');
create or replace TEMP view aggJoin8107809333473485418 as select movie_id as v12 from movie_companies as mc, aggView3254008424787148342 where mc.company_id=aggView3254008424787148342.v1;
create or replace TEMP view aggView6171394968660373930 as select v12, COUNT(*) as annot from aggJoin2820336204201584296 group by v12;
create or replace TEMP view aggJoin6933356490544524068 as select id as v12, title as v20, annot from title as t, aggView6171394968660373930 where t.id=aggView6171394968660373930.v12;
create or replace TEMP view aggView4418900179052511834 as select v12, COUNT(*) as annot from aggJoin8107809333473485418 group by v12;
create or replace TEMP view aggJoin4079440670905704098 as select v20, aggJoin6933356490544524068.annot * aggView4418900179052511834.annot as annot from aggJoin6933356490544524068 join aggView4418900179052511834 using(v12);
create or replace TEMP view res as select MIN(v20) as v31 from aggJoin4079440670905704098;
select sum(v31) from res;